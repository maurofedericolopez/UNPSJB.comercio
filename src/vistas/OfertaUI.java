package vistas;

import comercio.ControllerSingleton;
import controladoresJPA.ProductoJpaController;
import controladoresJPA.exceptions.CampoIncompletoException;
import java.util.Date;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JOptionPane;
import modelo.Categoria;
import modelo.Marca;

/**
 *
 * @author Mauro Federico Lopez
 */
public class OfertaUI extends javax.swing.JPanel {

    private ProductoJpaController productoJpaController;

    /**
     * Creates new form OfertaUI
     */
    public OfertaUI() {
        initComponents();
        productoJpaController = ControllerSingleton.getProductoJpaController();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        panelOfertaProducto = new javax.swing.JPanel();
        etiquetaCodigoProducto = new javax.swing.JLabel();
        etiquetaPorcentajeDescuentoProducto = new javax.swing.JLabel();
        etiquetaFechaInicioProducto = new javax.swing.JLabel();
        etiquetaFechaFinProducto = new javax.swing.JLabel();
        botonCrearOfertaProducto = new javax.swing.JButton();
        campoCodigoProducto = new javax.swing.JTextField();
        campoFechaInicioProducto = new com.toedter.calendar.JDateChooser();
        campoFechaFinProducto = new com.toedter.calendar.JDateChooser();
        jLabel1 = new javax.swing.JLabel();
        campoPorcentajeDescuentoProducto = new javax.swing.JFormattedTextField();
        panelOfertaCategoria = new javax.swing.JPanel();
        etiquetaCategoria = new javax.swing.JLabel();
        campoCategoria = new javax.swing.JComboBox();
        etiquetaPorcentajeDescuentoCategoria = new javax.swing.JLabel();
        etiquetaFechaInicioCategoria = new javax.swing.JLabel();
        etiquetaFechaFinCategoria = new javax.swing.JLabel();
        botonCrearOfertaCategoria = new javax.swing.JButton();
        campoFechaInicioCategoria = new com.toedter.calendar.JDateChooser();
        campoFechaFinCategoria = new com.toedter.calendar.JDateChooser();
        jLabel2 = new javax.swing.JLabel();
        campoPorcentajeDescuentoCategoria = new javax.swing.JFormattedTextField();
        panelOfertaMarca = new javax.swing.JPanel();
        etiquetaMarca = new javax.swing.JLabel();
        campoMarca = new javax.swing.JComboBox();
        etiquetaPorcentajeDescuentoMarca = new javax.swing.JLabel();
        etiquetaFechaInicioMarca = new javax.swing.JLabel();
        etiquetaFechaFinMarca = new javax.swing.JLabel();
        botonCrearOfertaMarca = new javax.swing.JButton();
        campoFechaInicioMarca = new com.toedter.calendar.JDateChooser();
        campoFechaFinMarca = new com.toedter.calendar.JDateChooser();
        jLabel3 = new javax.swing.JLabel();
        campoPorcentajeDescuentoMarca = new javax.swing.JFormattedTextField();

        setMaximumSize(new java.awt.Dimension(900, 500));
        setMinimumSize(new java.awt.Dimension(900, 500));
        setLayout(new java.awt.BorderLayout());

        panelOfertaProducto.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Crear oferta para un producto", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 14))); // NOI18N
        panelOfertaProducto.setMaximumSize(new java.awt.Dimension(900, 160));
        panelOfertaProducto.setMinimumSize(new java.awt.Dimension(900, 160));
        panelOfertaProducto.setPreferredSize(new java.awt.Dimension(900, 160));

        etiquetaCodigoProducto.setText("Ingrese el código del producto");

        etiquetaPorcentajeDescuentoProducto.setText("Indique el porcentaje de descuento");

        etiquetaFechaInicioProducto.setText("Indique la fecha de inicio de la oferta");

        etiquetaFechaFinProducto.setText("Indique la fecha de fin de la oferta");

        botonCrearOfertaProducto.setText("Crear Oferta");
        botonCrearOfertaProducto.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                botonCrearOfertaProductoActionPerformed(evt);
            }
        });

        jLabel1.setText("(Ej. 15%)");

        campoPorcentajeDescuentoProducto.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(java.text.NumberFormat.getPercentInstance())));

        javax.swing.GroupLayout panelOfertaProductoLayout = new javax.swing.GroupLayout(panelOfertaProducto);
        panelOfertaProducto.setLayout(panelOfertaProductoLayout);
        panelOfertaProductoLayout.setHorizontalGroup(
            panelOfertaProductoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelOfertaProductoLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(panelOfertaProductoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(etiquetaFechaFinProducto, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaFechaInicioProducto, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaPorcentajeDescuentoProducto, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaCodigoProducto, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 177, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaProductoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(botonCrearOfertaProducto, javax.swing.GroupLayout.DEFAULT_SIZE, 164, Short.MAX_VALUE)
                    .addComponent(campoCodigoProducto)
                    .addComponent(campoFechaInicioProducto, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(campoFechaFinProducto, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(campoPorcentajeDescuentoProducto))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 65, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(464, Short.MAX_VALUE))
        );
        panelOfertaProductoLayout.setVerticalGroup(
            panelOfertaProductoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelOfertaProductoLayout.createSequentialGroup()
                .addGroup(panelOfertaProductoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(etiquetaCodigoProducto)
                    .addComponent(campoCodigoProducto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaProductoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(etiquetaPorcentajeDescuentoProducto)
                    .addComponent(jLabel1)
                    .addComponent(campoPorcentajeDescuentoProducto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaProductoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(etiquetaFechaInicioProducto)
                    .addComponent(campoFechaInicioProducto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaProductoLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(etiquetaFechaFinProducto)
                    .addComponent(campoFechaFinProducto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(botonCrearOfertaProducto)
                .addGap(0, 7, Short.MAX_VALUE))
        );

        add(panelOfertaProducto, java.awt.BorderLayout.PAGE_START);

        panelOfertaCategoria.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Crear oferta para los productos de una categoría", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 14))); // NOI18N
        panelOfertaCategoria.setMaximumSize(new java.awt.Dimension(900, 160));
        panelOfertaCategoria.setMinimumSize(new java.awt.Dimension(900, 160));
        panelOfertaCategoria.setPreferredSize(new java.awt.Dimension(900, 160));

        etiquetaCategoria.setText("Seleccione una categoría");

        campoCategoria.setModel(new vistas.modelos.CategoriaComboBoxModel());

        etiquetaPorcentajeDescuentoCategoria.setText("Indique el porcentaje de descuento");

        etiquetaFechaInicioCategoria.setText("Indique la fecha de inicio de la oferta");

        etiquetaFechaFinCategoria.setText("Indique la fecha de fin de la oferta");

        botonCrearOfertaCategoria.setText("Crear Oferta");
        botonCrearOfertaCategoria.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                botonCrearOfertaCategoriaActionPerformed(evt);
            }
        });

        jLabel2.setText("(Ej. 15%)");

        campoPorcentajeDescuentoCategoria.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(java.text.NumberFormat.getPercentInstance())));

        javax.swing.GroupLayout panelOfertaCategoriaLayout = new javax.swing.GroupLayout(panelOfertaCategoria);
        panelOfertaCategoria.setLayout(panelOfertaCategoriaLayout);
        panelOfertaCategoriaLayout.setHorizontalGroup(
            panelOfertaCategoriaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelOfertaCategoriaLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(panelOfertaCategoriaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(etiquetaFechaFinCategoria, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaFechaInicioCategoria, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaPorcentajeDescuentoCategoria, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaCategoria, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 177, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaCategoriaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(campoCategoria, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(botonCrearOfertaCategoria, javax.swing.GroupLayout.DEFAULT_SIZE, 164, Short.MAX_VALUE)
                    .addComponent(campoFechaInicioCategoria, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(campoFechaFinCategoria, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(campoPorcentajeDescuentoCategoria))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel2, javax.swing.GroupLayout.PREFERRED_SIZE, 65, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(464, Short.MAX_VALUE))
        );
        panelOfertaCategoriaLayout.setVerticalGroup(
            panelOfertaCategoriaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelOfertaCategoriaLayout.createSequentialGroup()
                .addGroup(panelOfertaCategoriaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(campoCategoria, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(etiquetaCategoria))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaCategoriaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(etiquetaPorcentajeDescuentoCategoria)
                    .addComponent(jLabel2)
                    .addComponent(campoPorcentajeDescuentoCategoria, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaCategoriaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(etiquetaFechaInicioCategoria)
                    .addComponent(campoFechaInicioCategoria, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaCategoriaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(etiquetaFechaFinCategoria)
                    .addComponent(campoFechaFinCategoria, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(botonCrearOfertaCategoria)
                .addGap(0, 27, Short.MAX_VALUE))
        );

        add(panelOfertaCategoria, java.awt.BorderLayout.CENTER);

        panelOfertaMarca.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Crear oferta para los productos de una marca", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Tahoma", 1, 14))); // NOI18N
        panelOfertaMarca.setMaximumSize(new java.awt.Dimension(900, 160));
        panelOfertaMarca.setMinimumSize(new java.awt.Dimension(900, 160));
        panelOfertaMarca.setPreferredSize(new java.awt.Dimension(900, 160));

        etiquetaMarca.setText("Seleccione una marca");

        campoMarca.setModel(new vistas.modelos.CategoriaComboBoxModel());

        etiquetaPorcentajeDescuentoMarca.setText("Indique el porcentaje de descuento");

        etiquetaFechaInicioMarca.setText("Indique la fecha de inicio de la oferta");

        etiquetaFechaFinMarca.setText("Indique la fecha de fin de la oferta");

        botonCrearOfertaMarca.setText("Crear Oferta");
        botonCrearOfertaMarca.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                botonCrearOfertaMarcaActionPerformed(evt);
            }
        });

        jLabel3.setText("(Ej. 15%)");

        campoPorcentajeDescuentoMarca.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(java.text.NumberFormat.getPercentInstance())));

        javax.swing.GroupLayout panelOfertaMarcaLayout = new javax.swing.GroupLayout(panelOfertaMarca);
        panelOfertaMarca.setLayout(panelOfertaMarcaLayout);
        panelOfertaMarcaLayout.setHorizontalGroup(
            panelOfertaMarcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelOfertaMarcaLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(panelOfertaMarcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(etiquetaFechaFinMarca, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaFechaInicioMarca, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaPorcentajeDescuentoMarca, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(etiquetaMarca, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.PREFERRED_SIZE, 177, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaMarcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(campoMarca, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(botonCrearOfertaMarca, javax.swing.GroupLayout.DEFAULT_SIZE, 164, Short.MAX_VALUE)
                    .addComponent(campoFechaInicioMarca, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(campoFechaFinMarca, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(campoPorcentajeDescuentoMarca))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel3, javax.swing.GroupLayout.PREFERRED_SIZE, 65, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(464, Short.MAX_VALUE))
        );
        panelOfertaMarcaLayout.setVerticalGroup(
            panelOfertaMarcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelOfertaMarcaLayout.createSequentialGroup()
                .addGroup(panelOfertaMarcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(campoMarca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(etiquetaMarca))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaMarcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(etiquetaPorcentajeDescuentoMarca)
                    .addComponent(jLabel3)
                    .addComponent(campoPorcentajeDescuentoMarca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaMarcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(etiquetaFechaInicioMarca)
                    .addComponent(campoFechaInicioMarca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelOfertaMarcaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(etiquetaFechaFinMarca)
                    .addComponent(campoFechaFinMarca, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(botonCrearOfertaMarca)
                .addGap(0, 7, Short.MAX_VALUE))
        );

        add(panelOfertaMarca, java.awt.BorderLayout.PAGE_END);
    }// </editor-fold>//GEN-END:initComponents

    private void botonCrearOfertaProductoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_botonCrearOfertaProductoActionPerformed
        try {
            camposOfertaProductoCompletos();
            String codigoProducto = campoCodigoProducto.getText();
            Double descuento = ((Number) campoPorcentajeDescuentoProducto.getValue()).doubleValue();
            Date fechaInicio = campoFechaInicioProducto.getDate();
            Date fechaFin = campoFechaFinProducto.getDate();
            productoJpaController.crearOfertaParaProducto(codigoProducto, descuento, fechaInicio, fechaFin);
            JOptionPane.showMessageDialog(null, "Se ha completó la operación.", "Enhorabuena", JOptionPane.INFORMATION_MESSAGE);
            limpiarCampos();
        } catch(CampoIncompletoException ex) {
            ex.mostrarDialogo();
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(null, ex.getMessage(), "Error", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_botonCrearOfertaProductoActionPerformed

    private void botonCrearOfertaCategoriaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_botonCrearOfertaCategoriaActionPerformed
        try {
            camposOfertaCategoriaCompletos();
            Categoria categoria = (Categoria) campoCategoria.getSelectedItem();
            Double descuento = ((Number) campoPorcentajeDescuentoCategoria.getValue()).doubleValue();
            Date fechaInicio = campoFechaInicioCategoria.getDate();
            Date fechaFin = campoFechaFinCategoria.getDate();
            productoJpaController.crearOfertaParaProductosDeUnaCategoria(categoria, descuento, fechaInicio, fechaFin);
            JOptionPane.showMessageDialog(null, "Se ha completó la operación.", "Enhorabuena", JOptionPane.INFORMATION_MESSAGE);
            limpiarCampos();
        } catch(CampoIncompletoException ex) {
            ex.mostrarDialogo();
        } catch (Exception ex) {
            Logger.getLogger(OfertaUI.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_botonCrearOfertaCategoriaActionPerformed

    private void botonCrearOfertaMarcaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_botonCrearOfertaMarcaActionPerformed
        try {
            camposOfertaMarcaCompletos();
            Marca marca = (Marca) campoMarca.getSelectedItem();
            Double descuento = ((Number) campoPorcentajeDescuentoMarca.getValue()).doubleValue();
            Date fechaInicio = campoFechaInicioMarca.getDate();
            Date fechaFin = campoFechaFinMarca.getDate();
            productoJpaController.crearOfertaParaProductosDeUnaMarca(marca, descuento, fechaInicio, fechaFin);
            JOptionPane.showMessageDialog(null, "Se ha completó la operación.", "Enhorabuena", JOptionPane.INFORMATION_MESSAGE);
            limpiarCampos();
        } catch(CampoIncompletoException ex) {
            ex.mostrarDialogo();
        } catch (Exception ex) {
            Logger.getLogger(OfertaUI.class.getName()).log(Level.SEVERE, null, ex);
        }
    }//GEN-LAST:event_botonCrearOfertaMarcaActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton botonCrearOfertaCategoria;
    private javax.swing.JButton botonCrearOfertaMarca;
    private javax.swing.JButton botonCrearOfertaProducto;
    private javax.swing.JComboBox campoCategoria;
    private javax.swing.JTextField campoCodigoProducto;
    private com.toedter.calendar.JDateChooser campoFechaFinCategoria;
    private com.toedter.calendar.JDateChooser campoFechaFinMarca;
    private com.toedter.calendar.JDateChooser campoFechaFinProducto;
    private com.toedter.calendar.JDateChooser campoFechaInicioCategoria;
    private com.toedter.calendar.JDateChooser campoFechaInicioMarca;
    private com.toedter.calendar.JDateChooser campoFechaInicioProducto;
    private javax.swing.JComboBox campoMarca;
    private javax.swing.JFormattedTextField campoPorcentajeDescuentoCategoria;
    private javax.swing.JFormattedTextField campoPorcentajeDescuentoMarca;
    private javax.swing.JFormattedTextField campoPorcentajeDescuentoProducto;
    private javax.swing.JLabel etiquetaCategoria;
    private javax.swing.JLabel etiquetaCodigoProducto;
    private javax.swing.JLabel etiquetaFechaFinCategoria;
    private javax.swing.JLabel etiquetaFechaFinMarca;
    private javax.swing.JLabel etiquetaFechaFinProducto;
    private javax.swing.JLabel etiquetaFechaInicioCategoria;
    private javax.swing.JLabel etiquetaFechaInicioMarca;
    private javax.swing.JLabel etiquetaFechaInicioProducto;
    private javax.swing.JLabel etiquetaMarca;
    private javax.swing.JLabel etiquetaPorcentajeDescuentoCategoria;
    private javax.swing.JLabel etiquetaPorcentajeDescuentoMarca;
    private javax.swing.JLabel etiquetaPorcentajeDescuentoProducto;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JPanel panelOfertaCategoria;
    private javax.swing.JPanel panelOfertaMarca;
    private javax.swing.JPanel panelOfertaProducto;
    // End of variables declaration//GEN-END:variables

    private void camposOfertaProductoCompletos() throws CampoIncompletoException {
        if(campoCodigoProducto.getText().isEmpty())
            throw new CampoIncompletoException("No ha indicado el código del producto.");
        if(campoPorcentajeDescuentoProducto.getValue() == null)
            throw new CampoIncompletoException("No ha indicado el porcentaje de descuento.");
        if(campoFechaInicioProducto.getDate() == null)
            throw new CampoIncompletoException("No ha indicado la fecha de inicio de la oferta.");
        if(campoFechaFinProducto.getDate() == null)
            throw new CampoIncompletoException("No ha indicado la fecha de fin de la oferta.");
    }

    private void camposOfertaCategoriaCompletos() throws CampoIncompletoException {
        if(campoCategoria.getSelectedItem() == null)
            throw new CampoIncompletoException("No ha seleccionado una categoría.");
        if(campoPorcentajeDescuentoCategoria.getValue() == null)
            throw new CampoIncompletoException("No ha indicado el porcentaje de descuento.");
        if(campoFechaInicioCategoria.getDate() == null)
            throw new CampoIncompletoException("No ha indicado la fecha de inicio de la oferta.");
        if(campoFechaFinCategoria.getDate() == null)
            throw new CampoIncompletoException("No ha indicado la fecha de fin de la oferta.");
    }

    private void camposOfertaMarcaCompletos() throws CampoIncompletoException {
        if(campoMarca.getSelectedItem() == null)
            throw new CampoIncompletoException("No ha seleccionado una marca.");
        if(campoPorcentajeDescuentoMarca.getValue() == null)
            throw new CampoIncompletoException("No ha indicado el porcentaje de descuento.");
        if(campoFechaInicioMarca.getDate() == null)
            throw new CampoIncompletoException("No ha indicado la fecha de inicio de la oferta.");
        if(campoFechaFinMarca.getDate() == null)
            throw new CampoIncompletoException("No ha indicado la fecha de fin de la oferta.");
    }

    private void limpiarCampos() {
        campoCodigoProducto.setText("");
        campoPorcentajeDescuentoProducto.setValue(null);
        campoFechaInicioProducto.setDate(null);
        campoFechaFinProducto.setDate(null);
        campoCategoria.setSelectedItem(null);
        campoPorcentajeDescuentoCategoria.setValue(null);
        campoFechaInicioCategoria.setDate(null);
        campoFechaFinCategoria.setDate(null);
        campoMarca.setSelectedItem(null);
        campoPorcentajeDescuentoMarca.setValue(null);
        campoFechaInicioMarca.setDate(null);
        campoFechaFinMarca.setDate(null);
    }

}
